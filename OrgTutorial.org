#+SEQ_TODO: TODO | DONE(d)  CANCEL(c)  FAIL(f) CONTINUE(u)  

* DONE Step follow CB 
** DONE following [[http://orgmode.org/worg/org-tutorials/orgtutorial_dto.html][David's org-mode tutorial]] 
   CLOSED: [2014-09-04 Thu 15:03] 
*** learn link mode 
for both http and file, such as [[~/.emacs.d/init.el][emacs init file]] [[~/.emacs.d/init-org.el][org-mode init file]] 
the link can be open by C-c C-o insert link can by C-c C-l, or type [[][]] 
*** learn agenda file
C-c a for enter, t for list file, 
in list t for change mark C-c C-s in TODO line, for choice scheduling. 
C-c a a for list scheduling. l for log in list 
*** should follow [[http://orgmode.org/manual/index.html][org-mode manual]] and [[http://orgmode.org/worg/][worg home page]] for deatil 
** DONE install w3m, apt-get it
   CLOSED: [2014-09-04 Thu 15:30] 
** DONE following [[http://blog.sina.com.cn/s/blog_559f6ffc01000aj1.html][yunmoon vi tutorial]] 
   CLOSED: [2014-09-05 Fri 14:28] 
*** edit mode 
into insert mode i I a A o O 
change one char r, R is hard to control 
s : x i; S : dd u : undo, U : ? undo oneline 
*** cursor move 
0 : home, ^ : first char, b : last word, w : next word head, e : next word end, $ : end 
M : middle windows line, H, W : NO 
C-b : page up, C-f : page down n (num) 
G : goto num line 
f (char) : next char, F (char) : last char, t T may not use, 
*** search 
/str, ?str : forward, backward search 
n, N : again, otherward again 
*** edit command 
v : entry mark mode mode. d : cut, y : copy, p : paste 
place. hjkl 0^bwe$ (){}, or search 
*** other 
C-o : do one comma 
** DONE following emacs tutorial again 
   CLOSED: [2014-09-05 Fri 16:41] 
*** cursor move 
C-v, M-v only in insert mode, C-M-v, C-l all ok 
C-a, C-b, C-f C-e only in insert mode, C-p, C-n all NOT 
M-<, M-> for begin and end of all, all ok 
C-e : scroll down, C-y scorll up, in command mode (NOT default) 
*** edit 
delete C-k : delete to end, all ok, or d $ 
M-DEL : delete last word, M-d : delete next word, all ok, or d b, d e 
C-/ : in insert mode, u in command mode 
M-y : paste list (UNKONW yet) 
*** file 
C-x C-f, C-x C-s, C-x C-c, all ok 
C-x 4 C-f : open in another windows 
*** windows 
C-x o : switch window 
** DONE following [[http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000][git tutorial from MiaoXuefeng]] 
   CLOSED: [2014-09-06 Sat 02:07] 
*** init 
git config --global user.name "Raymon SHan" 
git config --global user.email "quickhorse77@gmail.com" git init 
*** add/delete file and commit 
git add filename git rm filename 
git commit -m "sometext" 
git status : view file status 
git log : list all version 
git reflog : list version 
*** back to version 
git reset --hard [ HEAD | HEAD^^ | HEAD~20 | number ] : back commit to stage 
git checkout -- filename : back to last add or commit : back stage to working 
*** set github for first time 
git remote add origin https://github.com/RaymonSHan/learning.git 
git push -u origin master 
git clone https://github.com/RaymonSHan/learning.git 
*** branch 
git branch test : create branch 
git checkout test : switch to branch 
git checkout -b test : create and switch to branch 
git branch : show branch 
git branch -d test : delete branch 
git merge test : merge branch 
git stash [ | apply | pop | list ] : save temp , restore temp, restore and delete, list 
git branch delete [ -D ] test : D means force 
*** push to remote 
git push origin master 
[[http://862123204-qq-com.iteye.com/blog/1683315][push branch to origin]] git push origin test:test <2014-10-09 Thu>
** DONE following [[http://emacser.com/org-mode-yupeng.htm][chinese emacs site for org-mode]] 
   CLOSED: [2014-09-08 Mon 10:38] 
*** move between title 
C-c C-p : last title 
C-c C-n : next title 
C-c C-b : last same level title 
C-c C-f : next same level title 
C-c C-u : up level title 
*** table 
|-
|
TAB : refit 
* DONE My do myself .emacs.d
  CLOSED: [2014-09-19 Fri 23:46]
it is the first time to finish config. 
I should do programming for more request.
key-chord is good, if it can detect whether it is input or command.
** DONE install cedet following [[http://cedet.sourceforge.net/setup.shtml][cedet sourceforge]]
   CLOSED: [2014-09-10 Wed 11:32]
download [[http://nchc.dl.sourceforge.net/project/cedet/cedet/cedet-1.1.tar.gz][cedet v1.1]]
unzip
make EMACS=emacs
add following four lines to init-cedet.el
  (load-file "~/.emacs.d/cedet-1.1/common/cedet.el")
  (global-ede-mode 1)                      ; Enable the Project management system
  (semantic-load-enable-code-helpers)      ; Enable prototype help and smart completion 
  (global-srecode-minor-mode 1)            ; Enable template insertion menu
** DONE follow [[http://www.randomsample.de/cedetdocs/ede/index.html][emacs development environment]] quick start. it should be read again
   CLOSED: [2014-09-11 Thu 13:00]
C-x h for dired windows in emacs
should install autoconf & libtool & g++ via apt-get
change configure.ac follow [[http://www.gnu.org/software/automake/manual/automake.html#Modernize-AM_005fINIT_005fAUTOMAKE-invocation][autoconf tutorial]]
just following, insert AM_CPPFLAGS, -I../include, run in main.cpp buffer
** DONE install ecb, the ide view of cedet
   CLOSED: [2014-09-11 Thu 16:12]
download [[http://ecb.sourceforge.net/cvs_snapshots/ecb.tar.gz][ecb v2.40]]
add following two lines to init-ecb.el
  (add-to-list 'load-path "~/.emacs.d/ecb-snap")
  (require 'ecb)
add following two lines before (require 'ecb), following [[https://bugs.debian.org/cgi-bin/bugreport.cgi?bug%3D729865][ecb bug]]
  (setq stack-trace-on-error t)
  (setq ecb-version-check nil)
** DONE install smex
   CLOSED: [2014-09-11 Thu 16:29]
download from [[https://github.com/nonsequitur/smex][smex home]]
just follow it, for little config
** DONE install ido
   CLOSED: [2014-09-12 Fri 14:00]
download from [[http://repo.or.cz/w/emacs.git/blob_plain/HEAD:/lisp/ido.el][ido.el]]. just add few
C-s for next, C-r for prev. // for root, ~/ for home
** DONE install translate
   CLOSED: [2014-09-12 Fri 14:56]
follow [[http://blog.chinaunix.net/uid/20263484/cid-8773-list-1.html][blog in chinaunix]], download from  [[https://github.com/zhenze12345/youdao.el][translate plugin by youdao]]
get account for [[http://fanyi.youdao.com/openapi?path%3Ddata-mode][youdao]] API key:1665991319, keyfrom:RaymonSHan-GIT, site:http://github.com/RaymonSHan
install [[http://www.emacswiki.org/emacs/download/pos-tip.el][pos-tip.el]] requested
install [[https://github.com/zhenze12345/youdao.el/blob/master/youdao.el][youdao.el]]
very good thank i expect, i bind to "C-M-y"
** DONE install eim
   CLOSED: [2014-09-12 Fri 15:28]
download from [[https://github.com/wenbinye/emacs-eim][eim github]], little config, C-\ for switch. C-n for next page
** DONE install color-theme
   CLOSED: [2014-09-13 Sat 19:38]
download from [[http://www.nongnu.org/color-theme/][color-theme home]], add few config.
follow [[http://www.emacswiki.org/ColorTheme][color-theme emacswiki]], I choose classic, font:"DejaVu Sans Mono" height:105
download [[https://raw.githubusercontent.com/vic/color-theme-buffer-local/master/color-theme-buffer-local.el][color-theme-buffer-local]], choose robin-hood for org, ??? NO EFFECT ???
set global-linum-mode, display-time-mode
** DONE install [[https://github.com/magnars/expand-region.el][expand-region]] simple and useful
   CLOSED: [2014-09-13 Sat 20:21]
C-= for mark, C-g for cancel mark.
** DONE change org-mode setting org-log-done follow [[http://orgmode.org/manual/Closing-items.html][org manual]]
   CLOSED: [2014-09-13 Sat 22:59]
it change behavior since i update org-mode
** DONE install w3m 
   CLOSED: [2014-09-14 Sun 00:44]
download development version from [[http://emacs-w3m.namazu.org/][emacs-w3m home]] via cvs, NOT the zip.
autoconf, ./configure, make, sudo make install
following [[http://www.emacswiki.org/emacs/emacs-w3m][w3m emacswiki]]
found in other place, for open new tab and display image default.

** DONE install flycheck
   CLOSED: [2014-09-14 Sun 01:47]
download dash from [[https://github.com/magnars/dash.el][dash in github]], flycheck require it.
download from [[https://github.com/flycheck/flycheck][flycheck in github]], only add require
add (global-flycheck-mode 1)
** DONE install smartpaners
   CLOSED: [2014-09-14 Sun 14:56]
download from [[https://github.com/Fuco1/smartparens][smartpaners github]], add require.
add (smartpanes-global-mode 1)
** CONTINUE learning eshell, pause now
   CLOSED: [2014-09-14 Sun 20:50]
should read [[http://www.masteringemacs.org/articles/2010/12/13/complete-guide-mastering-eshell/][master eshell by mickey]]
cd =, cd - for eshell, when reading eshellautojump
** DONE install DocViewMode
   CLOSED: [2014-09-14 Sun 22:13]
install ghostscript and xpdf by apt-get
can open .pdf file
** DONE install magit
   CLOSED: [2014-09-14 Sun 23:20]
download [[https://github.com/magit/git-modes][git-modes]]
following [[https://github.com/magit/magit#installation][magit in github]]
should read [[http://magit.github.io/magit.html][magit manual]]
** DONE install evil
   CLOSED: [2014-09-16 Tue 15:34]
following [[http://www.emacswiki.org/emacs/Evil][evil emacswiki]], easy install
vim is better for better for change, i should change many bind
i should use all emacs bind in insert-mode, and most vim bind in command-mode
  now i replace evil-insert-mode with evil-emacs-mode, and set ESC to back normal mode
  following [[http://stackoverflow.com/questions/25542097/emacs-evil-mode-how-to-change-insert-state-to-emacs-state-automaticly][stackoverflow for it]]
[[http://wikemacs.org/wiki/Evil][evil wiki]] is good, add some config from it.
I try to bind user define function to ESC in evil-emacs-state, but fail ???
  (define-key evil-emacs-state-map [escape] 'evil-normal-state) is OK
  (define-key evil-emacs-state-map [escape] 'myfunction') is FAIL
** DONE [[http://www.emacswiki.org/emacs/key-chord.el][key chord]] is so cool, i add jk for evil-normal-mode, it may so many config to do
   CLOSED: [2014-09-17 Wed 00:05]
is heavy chory ok?
i should set delay control, just like [[http://stackoverflow.com/questions/11377373/refining-key-chord-el-triggering][stack overflow say]]
** DONE it seems no key_up and key_down, only key_press in linux
* Learn emacs more
   CLOSED: [2014-09-22 Mon 20:27]
** DONE reading [[http://blog.chinaunix.net/uid-26185912-id-3334793.html][something about emacs]]
   CLOSED: [2014-09-14 Sun 21:32]
C-x C-w : save as
C-x i : insert file
C-t, M-t, C-x C-t : switch two letters, words, lines
M-u : to UPCASE, M-c : Upcase first
** DONE reading [[http://www.cnblogs.com/holbrook/tag/emacs/][14 paper for emacs in chinese]]
   CLOSED: [2014-09-14 Sun 22:15]
M-p, M-n : scroll command in M-x mod
T : turn on/off image in w3m for all buffer, t : for current place
should read it more about org
** CANCEL binding my keyboard, stop now, for further again.
   CLOSED: [2014-09-19 Fri 09:35]
*** DONE add cursor move
    CLOSED: [2014-09-17 Wed 22:49]
h : home, i : up,  j : left, k : down, l : right, ; : end
X
double : normal, a : speed, z : speed more, t : transpos
the above is ok, have a puase.
*** DONE try search selected function
    CLOSED: [2014-09-19 Fri 09:35]
*** CANCEL stop key chord try    
    CLOSED: [2014-09-19 Fri 09:34]
from [[http://stackoverflow.com/questions/202803/searching-for-marked-selected-text-in-emacs][stack overflow]], few body instereting it.

** learn orgmode some <2014-09-19 Fri>
C-c . : add timestamp, M-up M-down : move meta up/down, M-left M-right : shift meta 
* begin daemon test
** DONE finish cpp compile
   CLOSED: [2014-09-25 Thu 16:57]
*** DONE prepare dir and git
   CLOSED: [2014-09-15 Mon 10:04]
*** DONE refollowing [[http://www.randomsample.de/cedetdocs/ede/Quick-Start.html][emacs development environment]] for ede autoconf
   CLOSED: [2014-09-15 Mon 11:11]
still rememberless, only can follow
*** DONE make another repo
   CLOSED: [2014-09-15 Mon 11:31]
*** DONE learn getopt_long
   CLOSED: [2014-09-16 Tue 10:23]
follow [[http://linux.die.net/man/3/getopt_long][linux man for getopt_long]] & [[http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Option-Example.html][gun getopt_long example]]
*** DONE begin debug for set breakpoint
   CLOSED: [2014-09-16 Tue 12:47]
i can set breakpoint by menu
*** DONE begin daemon start follow [[http://blog.csdn.net/cupidove/article/details/9310413][csdn cupidove]]
   CLOSED: [2014-09-19 Fri 23:44]
it say good, the reason for twice fork() and so on. finish initDaemon();
*** CANCEL detect the state of daemon, 
   CLOSED: [2014-09-20 Sat 16:19]
follow [[http://blog.csdn.net/taolinke/article/details/8315492][csdn taolinke]] and start-stop-daemon.c
/proc is a sys directory for thread.
*** DONE compile start-stop-daemon.c
   CLOSED: [2014-09-21 Sun 00:55]
I had thought do para in arg, but i could not write better than it.
use start-stop-daemon.c itself.
*** DONE the most esay condition for ede project
    CLOSED: [2014-09-20 Sat 20:27]
in new directory, and the parent is not ede project.
all .c .h file in that directory. open one.
create project : M-x ede-new RET Automake RET projectname RET
create target : C-c . t programname RET program RET
may add file : C-c . a programname RET
compile : C-c . C
run : C-c . R
*** CANCEL add start-stop-daemon into content project
    CLOSED: [2014-09-21 Sun 00:49]
start-stop-daemon in sbin already, 
*** FAIL run daemon by it
    CLOSED: [2014-09-30 Tue 15:01]
find [[https://gist.github.com/alobato/1968852][start-stop-daemon example]]
*** DONE 7: error: invalid conversion from ‘void*’ to ‘char*’ [-fpermissive]
   CLOSED: [2014-09-25 Thu 00:10]
when try mmap, following [[http://stackoverflow.com/questions/23258521/invalid-conversion-from-void-to-char-when-using-mmap][should use implicit]] use static_cast<char*>()
*** DONE tv_nsec is not a number of timespec
   CLOSED: [2014-09-25 Thu 15:46]
i find __syscall_slong_t only used in 32bit, 
so i change it to compile to x64 by add CPPFLAGS -m64
** DONE alloc large memory
   CLOSED: [2014-09-30 Tue 14:59]
*** DONE runing mmap() get "Segmentation fault (core dumped)" *SOURCE*
   CLOSED: [2014-09-27 Sat 22:30]
 smallpagestart = static_cast<char*>
    (mmap (0, SIZE_RAY << 22, PROT_READ | PROT_WRITE, MAP_HUGETLB | MAP_PRIVATE | MAP_ANONYMOUS, -1, 0));
now this cause seg fault, while it is ok without MAP_HUGETLB <2014-09-26 Fri>
here is the solution in [[https://www.kernel.org/doc/Documentation/vm/hugetlbpage.txt][kernel]], should mount hugetlbfs for user space
here is lib for use hugepage in [[http://libhugetlbfs.sourceforge.net/][sourceforge]]
this maybe useful in [[http://docs.oracle.com/cd/E17952_01/refman-5.0-en/large-page-support.html][oracle use hugetlb]]
can view HugePage_Total, free, revd, pagesize from /proc/meminfo

finish step, the most easy way, 1 & 2 may be not necessary.
1. groupadd raymons & getent group raymons (get gid) & adduser raymon raymons
2. hugeadm --set-shm-group raymons | sudo sh -c 'echo 1001 > /proc/sys/vm/hugetlb_shm_group'
3. alloc 20 page : sudo sh -c 'echo 20 > /proc/sys/vm/nr_hugepages'
4. mount hugetlbfs : sudo mount -t hugetlbfs -o mode=777 none /mnt/huge
verity : cat /proc/meminfo & df -a
source : [[https://github.com/RaymonSHan/content.d/blob/0b61a3777ef048bb4a407e45f22051f5ed00d525/src/daemonctl.cpp][daemonctl.cpp in github]]
*** DONE running time for mmap and page fault
   CLOSED: [2014-09-28 Sun 00:16]
| get by clock_gettime()                  | 4096 lPage | 64* Gra | 64* Txt |
|-----------------------------------------+------------+---------+---------|
| time for clock_gettime()                | 21-100n    |         |         |
| mmap 1024*4k                            | 4-15m      |         |         |
| small page fault 1024 and write SHARED  | 800u-3m    |         |         |
| small page fault 1024 and write PRIVATE | 500u-2m    | 50-90m  | 38-50m  |
| write 1024, PRIVATE                     | 20-30u     | 1-2m    | 0.7-2m  |
summary : write one char for 2ns, 4k page fault 125ns, in text mode
| get by time in console         |        |      |        |
|--------------------------------+--------+------+--------|
| Get 128M for 1280 times = 160G |   real | user |    sys |
| huge page                      | 23.883 |  1.7 | 21.999 |
| small page                     | 25.335 |  1.8 | 23.383 |
summary : 4k page map&unmap 555ns, 2M page map&unmap 268us, 
in this test huge page improved 6% 
*** FAIL test madvise for free physics page for huge page
   CLOSED: [2014-09-30 Tue 10:05]
the size in nr_hugepages will roll down to physics memory limit, even set a large number.
mmap for huge page do not alloc physics page, it cause page fault as small page do.
something about [[https://www.kernel.org/doc/Documentation/vm/transhuge.txt][Transparent hugepage]]
All things seemed good, only the MADV_DONTNEED do not affect when MAP_HUGETLB setting in mmap
*** DONE change segment setting for large alloc
   CLOSED: [2014-09-28 Sun 16:39]
sudo sh -c 'echo 67108864 > shmall'      // 256G in 4k page
sudo sh -c 'echo 4294967296 > shmmax'    // 4G in byte
for summary : lpcs -lm
the size should use long long int memorySize = 0x1111LL for 64bit
and the most is add MAP_NORESERVE in mmap [[http://stackoverflow.com/questions/4803152/mmap-fails-when-length-is-larger-than-4gb][stackoverflow for alloc over 4G]],
  or the size is limited by swap space.
*** CONTINUE test madvise for normal page *SOURCE*
   CLOSED: [2014-09-30 Tue 14:52]
mmap&munmap for normal & huge page, and MADV_DONTNEED for normal use almost same time
is it because of VMWare? should test it in HOST again.
source : [[https://github.com/RaymonSHan/content.d/blob/4dc602c12cf1a8c7da42924b76af58f1659bbaab/src/daemonctl.cpp][daemonctl.cpp in github]]
** DONE mmap with file
   CLOSED: [2014-10-03 Fri 00:35]
*** DONE first map *SOURCE*
    CLOSED: [2014-10-02 Thu 01:17]
mmap file should RDWR right, the size of file changed by the last write, even after unmap
something unkonw, I have successed for MAP_PRIVATED in mmap() ???
source : [[https://github.com/RaymonSHan/content.d/blob/252d2ed46ca0b853c213311754497d94f403eb25/src/daemonctl.cpp][daemonctl.cpp in github]]
*** DONE hook file change
    CLOSED: [2014-10-02 Thu 22:46]
[[http://stackoverflow.com/questions/2103315/linux-kernel-system-call-hooking-example][hook sys_call_table]] [[http://stackoverflow.com/questions/11642318/hooking-mmap-system-to-provide-real-time-type-conversion][hook page fault]] [[http://stefan.buettcher.org/cs/fschange/][a proc system for file change]]
maybe inotify is enough, 
here is [[https://gist.github.com/TheCodeArtist/5874669][add inotify for mmap file in github]]
*** DONE test inotify for my use *SOURCE*
    CLOSED: [2014-10-03 Fri 00:27]
follow [[http://man7.org/tlpi/code/online/dist/inotify/demo_inotify.c.html][example in man]], so easy
whether mmap or not, inotify can notify file change outside from my program
source : [[https://github.com/RaymonSHan/content.d/blob/478eb83f6a84854df1c7a5a031b7195a081ba4c6/src/daemonctl.cpp][daemonctl.cpp in github]]
** DONE color and cursor in bash
   CLOSED: [2014-10-06 Mon 23:05]
[[https://wiki.archlinux.org/index.php/Color_Bash_Prompt][color in bash in wiki]]
30 Black, 31 Red, 32 Green, 33 Yellow, 34 Blue, 35 Pruple, 36 Cyan, 37 White
\e[0;30m for Regular, \e[1;30m for Bold, \e[4;30m for Underline, \e[40m for Background
[[http://www.linuxjournal.com/article/8603][color in echo]]
in bash : C-v <ESC> [{attr};{fg};{bg}m, which display like echo "^[[0;31;40mIn Color"
[[http://www.linuxquestions.org/questions/linux-software-2/issue-in-a-shell-script-using-an-if-statement-and-wall-875537/][command for color in bash]]
in bash : tput setaf {num}; restore : tput sgr0
[[http://unix.stackexchange.com/questions/99460/linux-shell-sending-messages-to-another-user][send message to other]]
w, wall, 
sudo echo "some meassage" > /dev/pts/4
[[http://www.techpository.com/?page_id%3D1398][escape sequence]]
all start with C-v <ESC> [
change cursor place : {row};{col}f; save cursor : s; restore cursor : u; 
** DONE do a clock for all pts by daemon 
   CLOSED: [2014-10-10 Fri 15:52]
*** DONE first a sleep loop single thread program *SOURCE*
    CLOSED: [2014-10-08 Wed 23:06]
this is a sleep loop program, a better should multi thread.
A full day to complete it.
source : [[https://github.com/RaymonSHan/content.d/blob/eeb7bb68eff1bb84312e88b8f7701e135bc462c5/src/daemonctl.cpp][daemonctl.cpp in github]]
*** DONE mutlthread ptsclock *SOURCE*
    CLOSED: [2014-10-10 Fri 13:16]
make a stupid error, use STACK_PLACE instead of STACK_SIZE for mmap, and fail <2014-10-09 Thu>
[[http://stackoverflow.com/questions/1083172/how-to-mmap-the-stack-for-the-clone-system-call-on-linux][a little sample for clone]]
MUST use __WCLONE option for waitpid for clone <2014-10-10 Fri>
source : [[https://github.com/RaymonSHan/content.d/blob/4a2504b6066f7d124e85880bf7f23abb7859a63f/src/daemonctl.cpp][daemonctl.cpp in github]]
*** FAIL try to get text from console
    CLOSED: [2014-10-10 Fri 15:52]
[[http://rosettacode.org/wiki/Terminal_control/Dimensions][control console on some platform]]
*** CONTINUE get user in linux
   CLOSED: [2014-10-07 Tue 22:17]
[[http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/][source of command in linux]], find who
** TODO start epoll test
[[http://stackoverflow.com/questions/16909856/adding-new-sockets-to-epoll-instances-other-than-the-epoll-instance-that-polls-t][the way I like, one leader for accept, other recv/send]]
[[http://www.ccvita.com/515.html][some advice for epoll]] how to read and write for ET
*** TODO test sigaction & sigquenc <2014-10-11 Sat> so many for read
[[http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/063/6391/6391l3.html][useful sample]] for get crash info
[[http://stackoverflow.com/questions/14014669/system-includes-moved-on-ubuntu-g-cannot-resolve-reg-eip][use REG_EIP]] add -I for g++
[[http://www.linuxprogrammingblog.com/code-examples/sigaction][sample for sigaction]]
[[http://stackoverflow.com/questions/9028934/how-to-interrupt-epoll-pwait-with-an-appropriate-signal][use pipe for epoll]]
[[http://www.win.tue.nl/~aeb/linux/lk/lk-12.html][some kind of event]]
[[http://pic.dhe.ibm.com/infocenter/comphelp/v121v141/index.jsp?topic%3D%252Fcom.ibm.xlc121.aix.doc%252Fcompiler_ref%252Fbif_gcc_atomic_val_comp_swap.html][atomic function in gcc]]
*** DONE for function pointer, class function pointer
    CLOSED: [2014-10-16 Thu 16:37]
(class pointer ->* class function pointer) (argv)  is
class function (this, argv)
i have used it in OcciIocp::Protocol.cpp
*** DONE rewrite memory alloc *SOURCE* from 10/22-29
    CLOSED: [2014-10-29 Wed 21:11]
i make a mistake for InterlockedCompareExchange and __sync_val_compare_and_swap
have different para order <2014-10-26 Sun>
<2014-10-28 Tue> a test for multithread memroypool with local cache
[[https://github.com/RaymonSHan/content.d/blob/8afdb6fcf58dc3f8a8916aa578837ab1d559a9b6/src/rmemory.cpp][source in github]], test for 4 thread in 2cpu, every thread get 15 and free 15 for 5M times
total for 300M times get and free. second line is second
the size in table means max number, it will free only reach max.
16 means all local, 14-8 are almost same
|  16 |  14 |  12 |  10 |    8 |    6 |    4 |    2 |
| 4.2 | 9.1 | 8.8 | 8.7 | 11.4 | 17.1 | 21.6 | 40.8 |
the fast is all local, only 14ns for one GET/FREE. 
I think in real world 16 local cache is enough.
*** DONE sample asm inline
    CLOSED: [2014-10-27 Mon 23:14]
[[http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-C-C][asm inline]]
should use stack for store per thread info
[[http://stackoverflow.com/questions/1898834/why-would-one-use-movl-1-eax-as-opposed-to-say-movb-1-eax][the useful is b s w l q t]]
[[https://gcc.gnu.org/onlinedocs/gcc/Simple-Constraints.html#Simple-Constraints][at&t asm use a b c d r m g i ]]
the asm "movq %0, (%%rax);" which %0 is r, sometime will create "mov %rax,(%rax)", 
  it create unexpected error. it cost me 2 hours, until disasm it. <2014-10-28 Tue>
the real reason for above is : i lost set "clobbered register". 
  i found it until i meet the same problem again. <2014-11-01 Sat>
*** DONE learn backtrace
    CLOSED: [2014-11-03 Mon 22:59]
there are two problem, one for C++ function name, other is line number
question is [[http://stackoverflow.com/questions/4636456/stack-trace-for-c-using-gcc][here]]
get source from [[http://cairo.sourcearchive.com/documentation/1.9.8-1/backtrace-symbols_8c-source.html][cairo backtrace_symbols]]
change __FUNCTION__ to __PRETTY_FUNCTION__ <2014-10-31 Fri>
use RTrace for myself add function in __TRY & __CATCH <2014-11-01 Sat>
do my SIGSEGV handle by RTrace <2014-11-01 Sat>
this is funny for [[http://www.linuxquestions.org/questions/programming-9/sigsegv-handler-segmentation-fauld-handler-277790/][test a valid pointer]]
*** CONTINUE epoll thread begin read <2014-11-03 Mon> 
    CLOSED: [2014-11-07 Fri 09:35]
    add class name by macro, in [[http://stackoverflow.com/questions/3563783/class-name-macro][stackoverflow]]
*** DONE thread comm
    CLOSED: [2014-11-07 Fri 21:10]
[[http://man7.org/linux/man-pages/man2/eventfd.2.html][eventfd]] may useful, finish REvent & RMultiEvent <2014-11-07 Fri>
timerfd ?
* linux learning
** segment page memory manger follow [[http://blog.csdn.net/macrocrazier/article/details/6705298][csdn marcocrazier]]
the most thing is slab, it is fit for my program
** reading [[http://blog.chinaunix.net/uid-72446-id-2060685.html][chinaunix j4ckl1u]] memory manger in linux
** reading [[http://www.cppblog.com/weiym/archive/2013/04/08/199238.html][some memory pool]] and a doc about dlmalloc
** DONE find function mremap(), maybe useful
   CLOSED: [2014-09-22 Mon 15:07]
** DONE find [[http://www.slideshare.net/llj098/epoll-from-the-kernel-side][a io ppt]] about epoll iocp
   CLOSED: [2014-09-22 Mon 15:32]
** DONE find [[https://github.com/RajivKurian/epoll-example][epoll example]] in github
or [[http://www.oschina.net/translate/how-to-use-epoll-a-complete-example-in-c][chinese version]] & [[http://www.cppblog.com/converse/archive/2008/04/29/48482.html][another chinese version]]
and i know cmake and nc
   CLOSED: [2014-09-22 Mon 15:54]
** DONE for hash map find [[https://code.google.com/p/sparsehash/?redir%3D1][google sparsehash]]
   CLOSED: [2014-09-22 Mon 20:29]
** DONE find a [[http://linux.chinaunix.net/techdoc/system/2008/07/05/1015194.shtml][writeable exec segment]]
   CLOSED: [2014-09-22 Mon 22:07]
** change malloc setting
mallopt(M_MMAP_MAX, 0);         // 禁止malloc调用mmap分配内存
mallopt(M_TRIM_THRESHOLD, -1);  // 禁止内存紧缩
** my question is how to tell kernel, the page can discard <2014-09-23 Tue>
may useful in [[http://stackoverflow.com/questions/22421014/allocating-temporary-memory-in-linux][same order as me]]
this is my really want [[http://lwn.net/Articles/594847/][MADV_FREE]], [[http://lwn.net/Articles/230799/][a older one]]
madvise is ok for all, but MADV_FREE not in linux

** DONE read [[~/Downloads/Understanding the Linux Kernel/Understanding.pdf][Understanding the Linux Kernel]] <2014-09-23 Tue> fast read
   CLOSED: [2014-09-24 Wed 21:22]
remap_file_pages() ?? not use

** MAP_HUGETLB flag in mmap for use 4M page, in any mmap man
** DONE find in files
   CLOSED: [2014-10-07 Tue 15:33]
 grep -n -R 'UTMP_FILE' /usr/include 
** fileno() from FILE* to int handle
** CONTINUE read [[http://www.win.tue.nl/~aeb/linux/lk/lk.html%20%20][linux kernel]] only a fast review
   CLOSED: [2014-10-13 Mon 14:03]
'strip' utility removes the symbol table
* should do things
** TODO should reread segment manager in linux
** TODO may read [[http://ergoemacs.org/emacs/emacs_keybinding_redesign.html][emacs keybinding setting]]
** TODO may install tab bar
** TODO following [[http://www.gnu.org/software/autoconf/manual/autoconf.html][full autoconf manual]] it is very long
** TODO may install cscope


** TODO follow [[http://alexott.net/en/writings/emacs-devenv/EmacsCedetOld.html][Alex Ott about cedet]] for v1.1
another way for make, same for make EMACS=emacs
  emacs -Q -nw -l cedet-build.el -f cedet-build (in terminal mode),
add following two line
  (load-file "~/.emacs.d/cedet-1.1/semantic/semantic-ia.el")
  (load-file "~/.emacs.d/cedet-1.1/semantic/bovine/semantic-gcc.el")
add addition header dir
  (semantic-add-system-include "~/exp/include/boost_1_37" 'c++-mode)

** TODO following [[http://www.gnu.org/software/autoconf/manual/autoconf.html][full autoconf manual]] it is very long
** TODO following [[http://www.gnu.org/software/emacs/tour/][gnu emacs tutorial]]

** TODO there are many about HUGE_TAB in [[http://stackoverflow.com/questions/6575010/ubuntu-10-04-error-in-using-map-hugetlb-with-map-shared][stackoverflow]]

* none of work
** DONE 野炊需要物品
   CLOSED: [2014-09-06 Sat 23:57] SCHEDULED: <2014-09-06 Sat>
桶装水 吊子 肉 烧烤螿 调料 烤炉 炭 锡纸

* useful page
** mm
[[http://futureinhands.iteye.com/blog/1048147][page switch in chinese]] [[http://www.rcollins.org/ddj/May96/][4M page]] [[http://www.mjmwired.net/kernel/Documentation/x86/x86_64/mm.txt][linux memory map]] [[https://www.kernel.org/doc/htmldocs/kernel-api/index.html][linux kernel api]] 
[[http://gperftools.googlecode.com/svn/trunk/doc/tcmalloc.html][tcmalloc in google]]
** epool
[[http://liuxun.org/blog/guan-yu-duo-jin-cheng-epoll--yu---liang-qun-wen-ti/][epoll with multiprocess]]
epoll in linux should use NIC with RSS(multi-queue) [[http://www.slideshare.net/sm9kr/iocp-vs-epoll-perfor][linux vs IOCP]]
[[https://github.com/aarond10/epoll_threadpool][epoll threadpool]]
** other
[[http://ld-hust.iteye.com/blog/630941][some blog]] 
[[http://en.cppreference.com/w/cpp/language/operators][overload operation in c++]]
* bicycle
| Date             | Way            | km | min | about                                  |
|------------------+----------------+----+-----+----------------------------------------|
| <2014-09-25 Thu> | Around Mudu    | 19 |  55 | for the first time do NOT rest at Mudu |
| <2014-09-29 Mon> | To Wujiang     | 22 |  68 | follow wind                            |
| <2014-09-29 Mon> | From Wujiang   | 24 |  95 | against wind                           |
| <2014-10-28 Tue> | Around YinCai  |  8 |  25 |                                        |
| <2014-11-05 Wed> | Around Pri Sch | 11 |  35 |                                        |
* evalution
| Date             | Place            | Agent    |   M | What                                         | cost      |
|------------------+------------------+----------+-----+----------------------------------------------+-----------|
| before           |                  |          |  16 |                                              | about 1.5 |
| <2014-09-24 Wed> | Service Center   | YuanXing |   3 | Procuratorate, specail people control        |           |
| <2014-09-25 Thu> | Service Center   | YuanXing |   3 | Gusu Family Planning Committe, mobile device |           |
| <2014-09-25 Thu> | Service Center   | ZhengJie |   2 | SZ Middle School(YQ), web app for student    |           |
| <2014-09-26 Fri> | Wujiang          | WeiKang  | 3.5 | LiLi Hospital Info System                    | 0.5       |
| <2014-09-29 Mon> | Wujiang          | YingCai  | 4.5 | Wujiang Public Security, car recognition     | S : 32    |
| <2014-10-14 Tue> | 33 Middle School | self     |   8 | Edu bea. Fundation Database of school        |           |
| <2014-10-15 Wed> | Service Center   | RunFang  |   3 | Pub Security, mobile police                  |           |
| <2014-10-23 Thu> | Service Center   | JinYuan  |   3 | Pub Security, Project manager                |           |
| <2014-10-27 Mon> | Service Center   | YuanXing |   3 | Env Monitor, hardware & software             |           |
| <2014-10-28 Tue> | YingCai          | YingCai  |   3 | Suzhou Newspaper Group, computer * 180       | S : 52    |
| <2014-11-04 Tue> | Service Center   | YanXing  |   3 | Info. Center, 10G FW                         |           |
* 工作内容
** 下周安排邮储银行余额查询地址变更
   DEADLINE: <2014-09-22 Mon>
** DONE 下周安排支付中心业务需求讨论（潘鑫）
   CLOSED: [2014-09-22 Mon 10:02] DEADLINE: <2014-09-22 Mon>
** CONTINUE 下周安排人民银行，讨论TCBS上线后，集中支付退票号的关联问题
   CLOSED: [2014-09-22 Mon 10:05] DEADLINE: <2014-09-22 Mon>
** CONTINUE 非税收入入库单时间拖延，工行、瑞联
   CLOSED: [2014-09-22 Mon 10:02] DEADLINE: <2014-09-22 Mon>
** 国库集中支付代理银行工作会议 工商银行 [2014-09-19 Fri]
潘鑫主持，张亮介绍近期工作、回单要求，赵斌介绍动态监控系统、467条报警、39退回，缪翔云补充。
王强介绍工资统发近期情况。
工行介绍电子化支付，其实施先直接、再授权。
** DONE 开发人员工作环境安排，预计在支付中心
   CLOSED: [2014-09-22 Mon 10:03] DEADLINE: <2014-09-22 Mon>
** TODO 移动线路安装，张家港保税区国地税 <2014-09-24 Wed>
** TODO 预算支出进度查询表，业务口径确认
   DEADLINE: <2014-10-08 Wed>


** TODO 中科江南业务研讨会 <2014-10-18 Sat>
曾：精细化管理，开酒店的例子
高：财政综合业务系统的目的，要基于业务。要定位为业务系统。
要基于项目管理。滚动预算基于项目，项目管理多维化，维度的可变化。历史数据的对比，要可对比性。
指标是资金的总控制额度，是高层面上的管理。
编制、执行、监督三块业务。指标粗，而项目细
系统中要体现出监督，要监督到明细支出，控制粗，而查询细
与OA的衔接。
动态管理，项目、人员。
杨：规范要通过预算公开来实现
项目的细分，要分到公开后能被公众理解。
项目要建立标准化体系。核算内容、核算标准
将项目库中的内容纳入执行，与项目库本身没有关系。



http://stackoverflow.com/questions/4636456/stack-trace-for-c-using-gcc
